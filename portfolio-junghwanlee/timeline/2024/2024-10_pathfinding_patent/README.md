# 🚇 지하철 제‧배연 시스템에 A* 적용 (Idea-Only)

> **Status:** concept / idea-only  
> **Summary:** Weighted A* + 로컬 PI 피드백으로 **평상시 공조 밸런스**와 **화재시 제‧배연**을 하나의 프레임으로 다루는 아이디어 초안.

---

## TL;DR
- 네트워크(샤프트·덕트·룸)를 **그래프**로 모델링하고 비용 `f(n) = g(n) + w*h(n)` 사용  
- **평상시** `w = 0` → 에너지·유량균형 / **화재시** `w ≥ 1` → 배연 최단(최소손실) 경로 편향  
- **전역:** Weighted A* 탐색 → **로컬:** 존별 PI 추종 → **이상:** Kill Switch(안전 프로파일) 전환

---

## 왜? (문제 배경)
- 지하철 **제‧배연 시스템**은 평상시(에너지 절감, 유량 밸런스) vs 화재시(배연, 역류 방지) 목표가 상충
- 규칙 기반 스위칭만으로는 **대규모 네트워크**에서 일관된 최적/준최적 보장 어려움

---

## 핵심 아이디어
- **그래프 모델**: 노드(AHU/분기/존/배연구) — 엣지(덕트, 피팅, **댐퍼**)
- **비용식(현재비용 g)**  
  `g(n) = α_H * (H_f + H_m)/H_ref + α_Q * FlowErr + α_P * P_fan/P_ref`  
  - `H_f`: 마찰손실헤드, `H_m`: 국부손실헤드(댐퍼·피팅)  
  - `FlowErr`: 존별 목표 유량 대비 오차(정규화)  
  - `P_fan`: 팬 전력(정규화)
- **휴리스틱(미래비용 h)**  
  `h(n) = β * d(n, F) * h_min / H_ref`  
  - `d(n, F)`: 화재존 F까지 **유효거리**(피팅 환산길이 포함)  
  - `h_min`: 최소 손실밀도(낙관적 추정 → A* 일관성/효율)
- **가중치 w**: 평상시 `w = 0` / 화재시 `w ≥ 1` (위험도 기반 가변 가능)

---
